{% extends 'local/local_dashboard.html' %}{% block content1 %} {%
endblock %} {% block content %}

<section class="feedback-detail">
  <div class="container">
    <div class="row">
      <div class="col-lg-12">
        <div class="feedback-info">
          <h2>Feedback Details</h2>
          <p><strong>Name:</strong> {{ feedback[0] }}</p>
          <p><strong>Email:</strong> {{ feedback[1] }}</p>
          <p><strong>Phone:</strong> {{ feedback[2] }}</p>
          <p><strong>Subject:</strong> {{ feedback[3] }}</p>
          <p><strong>Feedback Time:</strong> {{ feedback[4] }}</p>
          <p><strong>Store Name:</strong> {{ feedback[5] }}</p>
        </div>

        <div class="chat-container">
          <div class="chat-header">
            <h3>Chat History</h3>
          </div>
          <div class="chat-box">
            {% for chat in chat_result %}
            <div class="message-row">
              <div class="message {{chat.chat_type}}">
                <div class="message-header">
                  <strong>{{chat.username}} </strong
                  ><span class="user-name">{{chat.usertype}}</span>
                  <span class="timestamp">{{chat.create_time}}</span>
                </div>
                <div class="message-body">
                  <p>{{chat.content}}</p>
                </div>
              </div>
            </div>
            {% endfor %} {% if reply == 0 %}
            <div class="message-row">
              <div class="message staff">
                <div class="message-body">
                  <p>No response yet....</p>
                </div>
              </div>
            </div>
            {% endif %}
          </div>
          <form method="post">
            <input
              type="hidden"
              id="feedback_id"
              name="feedback_id"
              value="{{feedback_id}}"
            />
            <div class="chat-input">
              <textarea
                placeholder="Type your message here..."
                name="content"
                id="content"
              ></textarea>
              <button class="send-btn">Send</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</section>
<!-- 样式 -->
<style>
  .feedback-detail {
    padding: 30px 0;
  }

  .feedback-info {
    background-color: #f8f9fa;
    padding: 20px;
    border-radius: 8px;
    margin-bottom: 20px;
  }

  .chat-container {
    position: relative;
    background-color: #fff;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  }

  .chat-header {
    padding: 10px;
    background-color: #e9ecef;
    border-radius: 8px 8px 0 0;
  }

  .chat-box {
    margin-top: 20px;
    height: 400px;
    overflow-y: auto;
    padding-bottom: 20px;
    border-bottom: 2px solid #e9ecef;
  }

  .message-row {
    margin-bottom: 20px;
    display: flex;
  }

  .message {
    max-width: calc(100% - 60px);
    padding: 10px;
    border-radius: 5px;
    margin: 0 10px;
    word-wrap: break-word;
  }

  .staff {
    background-color: #d4edda;
    margin-left: auto;
  }

  .customer {
    background-color: #e9ecef;
    margin-right: auto;
  }

  .message-content {
    display: flex;
    align-items: flex-end;
  }

  .timestamp {
    font-size: 0.8em;
    color: #6c757d;
    margin-left: 10px;
  }

  .chat-input {
    display: flex;
    align-items: center;
  }

  .chat-input textarea {
    flex-grow: 1;
    padding: 10px;
    margin-right: 10px;
    border-radius: 5px;
    border: 1px solid #ccc;
  }

  .send-btn {
    padding: 10px 20px;
    background-color: #6c757d;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
  }

  .send-btn:hover {
    background-color: #5a6268;
  }
  .message-body {
    margin-top: 5px;
    padding: 5px;
    background-color: #fff;
    border-radius: 5px;
  }
</style>
{% endblock %}
